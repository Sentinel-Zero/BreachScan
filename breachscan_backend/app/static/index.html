<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BreachScan • Backend Home</title>
  <style>
    :root {
      --bg:#0f1115; --fg:#e4e7ec; --panel:#111621; --border:#1e2630; --muted:#9aa4b2;
      --accent:#1e6fff; --accent-2:#5fb3ff; --chip:#1e2630; --warn:#ffb020;
    }
    body { font-family: system-ui, Arial, sans-serif; margin:2rem; background:var(--bg); color:var(--fg); }
    a { color:var(--accent-2); text-decoration:none; } a:hover { text-decoration:underline; }
    h1 { margin:0 0 .25rem; }
    .muted { color:var(--muted); }
    .panel { background:var(--panel); border:1px solid var(--border); border-radius:10px; padding:1rem; }
    input { padding:.5rem .6rem; background:#1b2330; color:var(--fg); border:1px solid #2b3441; border-radius:8px; }
    button { padding:.55rem .9rem; background:var(--accent); color:#fff; border:none; border-radius:8px; cursor:pointer; }
    button:disabled { opacity:.6; cursor:default; }
    pre, code { background:#1b2330; padding:.6rem .75rem; border-radius:8px; font-size:.85rem; line-height:1.3; overflow:auto; display:block; box-sizing:border-box; }
    pre { margin:0 0 .75rem; white-space:pre; }
    code { white-space:pre-wrap; word-break:break-word; }
    ul { list-style:none; padding:0; margin:.5rem 0 0; }
    ul li { margin:.3rem 0; }
    .grid { display:grid; gap:1rem; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); }
    .row { display:flex; gap:.75rem; flex-wrap:wrap; align-items:center; }
    .divider { height:1px; background:var(--border); margin:1.25rem 0; border:0; }
    .tag { display:inline-block; background:var(--chip); padding:.2rem .55rem; border-radius:999px; font-size:.7rem; letter-spacing:.5px; text-transform:uppercase; }
    .links a { display:inline-block; margin:.25rem .6rem .25rem 0; font-size:.9rem; }
  </style>
</head>
<body>
  <div class="row" style="justify-content:space-between; margin-bottom:1rem;">
    <div>
      <h1>BreachScan Backend</h1>
      <div class="muted">Mock asset & scheduling service (in-memory).</div>
    </div>
    <div class="row">
      <a href="/static/scheduler.html">Scheduler</a>
      <span class="muted">·</span>
      <a href="/static/schedule.html">Scan List</a>
      <span class="muted">·</span>
      <a href="/docs" target="_blank">API Docs</a>
    </div>
  </div>

  <div class="grid">
    <!-- Panel: Overview / Links -->
    <div class="panel">
      <div class="tag">overview</div>
      <h2 style="margin:.5rem 0 .75rem; font-size:1.1rem;">Quick Links</h2>
      <div class="links">
        <a href="/assets" target="_blank">GET /assets</a>
        <a href="/redoc" target="_blank">ReDoc</a>
        <a href="/tenable/scheduled-scans" target="_blank">GET /tenable/scheduled-scans</a>
      </div>
      <hr class="divider" />
      <div class="muted" style="font-size:.8rem;">Features: asset listing, mock Tenable refresh, in-memory scheduled scans (daily / weekly / once) with IP/CIDR/range expansion.</div>
    </div>

    <!-- Panel: Asset Lookup -->
    <div class="panel">
      <div class="tag">assets</div>
      <h2 style="margin:.5rem 0 .75rem; font-size:1.1rem;">Lookup Asset</h2>
      <div class="row" style="align-items:flex-start;">
        <input id="assetIdInput" placeholder="asset-001" style="flex:1;" />
        <button id="fetchBtn">Fetch</button>
      </div>
      <pre id="assetOutput" style="margin-top:.75rem; min-height:110px;">Enter an asset id.</pre>
      <div class="muted" style="font-size:.7rem; margin-top:.4rem;">Sample IDs: asset-001, asset-002, asset-003, asset-004</div>
    </div>

    <!-- Panel: curl examples -->
    <div class="panel" style="display:flex; flex-direction:column;">
      <div class="tag">examples</div>
      <h2 style="margin:.5rem 0 .75rem; font-size:1.1rem;">curl Examples</h2>
      <pre><code>curl http://localhost:8000/assets
    curl http://localhost:8000/assets/asset-001
curl -X POST http://localhost:8000/tenable/refresh -H "Content-Type: application/json" -d '{"limit":5}'</code></pre>
      <div class="muted" style="font-size:.7rem; margin-top:.25rem;">Tip: Use single quotes on *nix shells; on PowerShell escape quotes: `'{\"limit\":5}'`.</div>
    </div>
  </div>

  <script>
    const input = document.getElementById('assetIdInput');
    const btn = document.getElementById('fetchBtn');
    const out = document.getElementById('assetOutput');
    async function fetchAsset(){
      const id = input.value.trim();
      if(!id){ out.textContent = 'Enter an asset id.'; return; }
      out.textContent = 'Loading...';
      try {
        const res = await fetch('/assets/' + encodeURIComponent(id));
        if(!res.ok){ out.textContent = 'Not found.'; return; }
        out.textContent = JSON.stringify(await res.json(), null, 2);
      } catch(e){ out.textContent = 'Error: ' + e; }
    }
    btn.addEventListener('click', fetchAsset);
    input.addEventListener('keydown', e => { if(e.key==='Enter') fetchAsset(); });
  </script>
</body>
</html>
